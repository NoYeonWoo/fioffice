<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="adminMapper">
	
	<resultMap type="Employee" id="employeeResultSet">
	
		<id property="empNo" column="EMP_NO" />
		<result property="empPwd" column="EMP_PWD" />
		<result property="empName" column="EMP_NAME" />
		<result property="phone" column="PHONE" />
		<result property="address" column="ADDRESS" />
		<result property="officePhone" column="OFFICE_PHONE" />
		<result property="email" column="EMAIL" />
		<result property="resNo" column="RES_NO" />
		<result property="joinDate" column="JOIN_DATE" />
		<result property="entDate" column="ENT_DATE" />
		<result property="originName" column="ORIGIN_NAME" />
		<result property="changeName" column="CHANGE_NAME" />
	    <result property="status" column="STATUS" />
	    <result property="deptName" column="DEPT_NAME" />
	    <result property="deptCode" column="DEPT_CODE" />
	    <result property="empPosition" column="JOB_NAME" />
	    <result property="jobCode" column="JOB_CODE" />
	</resultMap>
	
	<resultMap type="Dept" id="deptResultSet">
	
		<id property="deptCode" column="DEPT_CODE" />
		<result property="deptName" column="DEPT_NAME" />
	</resultMap>
	
	<resultMap type="Authority" id="authResultSet">
	
		<id property="authNo" column="AUTH_NO" />
		<result property="adminNo" column="ADMIN_NO" />
		<result property="empNo" column="EMP_NO" />
		<result property="empName" column="EMP_NAME" />
	</resultMap>
	
	<select id="selectDeptList" resultMap="deptResultSet">
		SELECT *
		FROM DEPT
		ORDER BY LENGTH(DEPT_CODE) ASC, DEPT_CODE ASC
	</select>
	
	<select id="selectEmployeeList" resultMap="employeeResultSet">
		SELECT EMP_NO,EMP_NAME,DEPT_CODE,JOB_NAME
		FROM EMPLOYEE JOIN JOB USING(JOB_CODE)
		ORDER BY LENGTH(JOB_CODE) DESC, JOB_CODE DESC
	</select>
	
	<select id="selectAuthority" parameterType="string" resultType="_int">
		SELECT COUNT(*)
		FROM AUTHORITY
		WHERE AUTH_NO = #{authNo}
	</select>
	
	<insert id="insertAuthority" parameterType="Authority">
		INSERT INTO AUTHORITY VALUES (#{authNo},#{adminNo},#{empNo})
	</insert>
	
	<select id="selectAuthList"  resultMap="authResultSet">
		SELECT  AUTH_NO, ADMIN_NO, EMP_NO, EMP_NAME
		FROM AUTHORITY JOIN EMPLOYEE USING(EMP_NO)	
	</select>
	
	<select id="selectAdminList"  resultType="string">
		SELECT  ADMIN_NO
		FROM ADMINMENU 	
	</select>
	
	<delete id="deleteAuthority" parameterType="string">
		DELETE FROM AUTHORITY WHERE AUTH_NO = #{authNo} 
	</delete>
</mapper>