<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="messageMapper">

	<resultMap id="MessageResultSet" type="Message">
		<id property="msgNo" column="MSG_NO"/>
		<result property="chatNo" column="CHAT_NO"/>
		<result property="msgSender" column="MSG_SENDER"/>
		<result property="msgContent" column="MSG_CONTENT"/>
		<result property="msgDate" column="MSG_DATE"/>
		<result property="msgReadStatus" column="MSG_READ_STATUS"/>
		<result property="msgReceiver" column="MSG_RECEIVER"/>
		<result property="empName" column="EMP_NAME"/>
		<result property="empPosition" column="JOB_NAME"/>
		<result property="deptName" column="DEPT_NAME"/>
	</resultMap>
	
	<resultMap id="ChatRoomResultSet" type="ChatRoom">
		<id property="chatRoomNo" column="CHAT_NO"/>
		<result property="member1" column="MEMBER1"/>
		<result property="member2" column="MEMBER2"/>
		<result property="chatRoomStatus" column="CHAT_STATUS"/>
	</resultMap>
	

	<insert id="insertMessage" parameterType="Message">
		INSERT INTO MESSAGE_MSG
		VALUES(SEQ_MSG.NEXTVAL,#{msgReceiver},#{msgSender},#{msgContent},#{msgDate},
		#{msgReadStatus},#{msgReceiver})
	</insert>
	
	
	<select id="selectMsgDetail" resultMap="MessageResultSet" parameterType="string">	
	 SELECT *
	 FROM MESSAGE_MSG A
	 LEFT JOIN EMPLYEE B USING ON A.MSG_RECEIVER = B.EMP_NO
	 WHERE msgNo=#{msgNo}
	</select>	
	
	
	<!--  
	<select id="chatroomList" parameterType="string" resultMap="ChatRoomResultSet">
	
	</select>
	

	<select id="selectChatroom" parameterType="string" resultMap="ChatRoomResultSet">
	
	</select>
	
	<select id="selectMessage" parameterType="string" resultMap="MessageResultSet">
	
	</select>
	
	
	
	<update id="deleteChatroom" parameterType="_int">
	
	</update>
	-->
	
	
</mapper>
